# 请求新增站点支持（无需编程经验）

如果你希望 pt-tools 支持一个新的 PT 站点，但你没有编程经验，可以通过提供站点页面数据的方式，由项目维护者来完成适配工作。

**整个过程不需要任何编程知识**，只需要会使用浏览器即可。

[返回首页](../../README.md)

## 目录

- [概述](#概述)
- [方式一：使用浏览器扩展自动采集（推荐）](#方式一使用浏览器扩展自动采集推荐)
  - [安装扩展](#安装扩展)
  - [一键自动采集](#一键自动采集)
  - [导出并提交](#导出并提交)
- [方式二：手动采集页面数据](#方式二手动采集页面数据)
  - [准备工作](#准备工作)
  - [第一步：确认站点类型](#第一步确认站点类型)
  - [第二步：保存搜索/种子列表页面](#第二步保存搜索种子列表页面)
  - [第三步：保存种子详情页面](#第三步保存种子详情页面)
  - [第四步：保存个人信息页面](#第四步保存个人信息页面)
  - [第五步：提供站点基本信息](#第五步提供站点基本信息)
  - [第六步：提交数据](#第六步提交数据)
- [隐私与安全提醒](#隐私与安全提醒)
- [常见问题](#常见问题)

## 概述

pt-tools 适配一个新站点需要了解该站点的页面结构。你需要提供以下 **3 类页面数据**：

| 序号 | 数据                   | 用途                                  | 必须 |
| ---- | ---------------------- | ------------------------------------- | ---- |
| 1    | 搜索/种子列表页面 HTML | 解析种子标题、大小、免费状态等        | ✅   |
| 2    | 种子详情页面 HTML      | 解析免费等级、免费到期时间、HR 状态等 | ✅   |
| 3    | 个人信息页面 HTML      | 解析上传量、下载量、分享率、魔力值等  | ✅   |

提供方式有两种：

| 方式                   | 操作难度            | 是否自动脱敏 | 推荐    |
| ---------------------- | ------------------- | ------------ | ------- |
| **浏览器扩展自动采集** | ⭐ 极低（一键完成） | ✅ 自动      | ✅ 推荐 |
| 手动保存 HTML          | 较高（6 个步骤）    | ❌ 需手动    | 备选    |

---

## 方式一：使用浏览器扩展自动采集（推荐）

使用 **PT Tools Helper** 浏览器扩展，只需在站点页面点击一个按钮，即可自动采集所需的全部页面数据，并自动移除敏感信息。

### 安装扩展

1. 从 [GitHub Releases](https://github.com/sunerpy/pt-tools/releases) 下载最新的 `pt-tools-helper.zip`
2. 解压到一个固定目录
3. 打开浏览器扩展管理页面：
   - Chrome → `chrome://extensions`
   - Edge → `edge://extensions`
4. 开启「**开发者模式**」→「**加载已解压的扩展程序**」→ 选择解压目录
5. 首次点击扩展图标时，点击「**🔓 授权并启用**」

### 一键自动采集

1. 在浏览器中**登录**目标 PT 站点
2. 打开站点的**任意页面**（首页、种子列表页均可）
3. 点击浏览器工具栏的扩展图标
4. 扩展会自动识别站点，显示「❓ 未知站点 (NexusPHP)」
5. 点击「**🚀 一键自动采集**」按钮
6. 扩展会自动完成以下操作：
   - 访问种子列表页，提取页面 HTML
   - 从列表中找到一个种子（优先免费种），访问其详情页并提取 HTML
   - 找到当前用户 ID，访问个人信息页并提取 HTML
   - 对所有 HTML 自动脱敏（移除 Passkey、Cookie、邮箱、IP 等）
7. 采集完成后显示「采集完成 3/3」

> 如果自动采集未能获取到全部 3 个页面（如未找到种子 ID），可展开「手动逐页采集」，在对应页面手动点击采集按钮补充。

### 导出并提交

采集完成后，在扩展弹窗底部的「**采集记录**」区域：

**方式 A：提交 GitHub Issue（推荐）**

1. 点击「**🐙 提交 Issue**」
2. 扩展会自动下载 ZIP 文件，并打开预填好标题和内容的 GitHub Issue 页面
3. 将下载的 ZIP 文件**拖拽到 Issue 编辑框**中上传
4. 点击「Submit new issue」提交

**方式 B：通过交流群提交**

1. 点击「**📦 导出 ZIP**」下载采集数据包
2. 将 ZIP 文件发送到交流群：
   - Telegram: https://t.me/+7YK2kmWIX0s1Nzdl
   - QQ 群: 274984594

> 采集的数据已自动脱敏，可以安全提交。如仍有顾虑，可用记事本打开 ZIP 中的 HTML 文件检查。

---

## 方式二：手动采集页面数据

如果你不想安装浏览器扩展，可以按照以下步骤手动采集。

### 准备工作

你需要准备：

- 一个已登录目标 PT 站点的浏览器（推荐 Chrome / Edge）
- 一个文本编辑器（记事本即可）

> **重要**：请确保你在该站点拥有正常的账号，且账号状态正常。

## 第一步：确认站点类型

大多数 PT 站点基于以下几种架构，不同架构的页面结构不同：

| 架构         | 特征                                           | 常见站点举例                       |
| ------------ | ---------------------------------------------- | ---------------------------------- |
| **NexusPHP** | 页面底部有 "NexusPHP" 字样，种子列表为表格形式 | HDSky、SpringSunday、大多数国内 PT |
| **mTorrent** | 现代化 UI，使用 API 接口                       | M-Team                             |
| **Gazelle**  | 页面风格类似 What.CD，有折叠式种子组           | 部分音乐站                         |
| **Unit3D**   | 现代化 UI，页面底部有 "UNIT3D" 字样            | 部分新建站点                       |

**如何确认**：

1. 打开站点首页，拉到页面最底部
2. 查看是否有 "Powered by NexusPHP" 或 "UNIT3D" 等字样
3. 如果不确定，不用担心——把页面截图发给维护者即可

## 第二步：保存搜索/种子列表页面

这一步需要保存站点的种子列表页面的 **完整 HTML 源代码**。

> **为什么需要这个**：维护者需要根据 HTML 结构编写解析规则，提取种子标题、大小、免费状态、上传时间等信息。

### 操作步骤

1. **登录站点**，进入种子列表页面（通常是 `torrents.php` 或首页）

2. **确保列表中包含免费种子**。如果当前没有免费种子，可以：
   - 等待站点发布免费种子活动
   - 或者直接保存当前页面（有免费种子更好，但不是必须的）

3. **打开浏览器开发者工具**：
   - 按键盘 `F12` 键（或 `Ctrl+Shift+I`）
   - 会在浏览器右侧或底部弹出一个面板

4. **复制页面 HTML**：

   **方法一：通过开发者工具（推荐）**

   ![开发者工具](../images/dev-tools-elements.png)
   - 在开发者工具中，点击顶部的 **"Elements"（元素）** 标签页
   - 在左侧 HTML 树的最顶部，找到 `<html>` 标签
   - **右键点击** `<html>` 标签
   - 选择 **"Copy" → "Copy outerHTML"**（复制 → 复制 outerHTML）
   - 打开记事本，粘贴（`Ctrl+V`），保存为 `search.html`

   **方法二：通过查看源代码**
   - 在浏览器地址栏中，在当前网址前面加上 `view-source:`
     - 例如：`view-source:https://example.com/torrents.php`
   - 按 `Enter` 键
   - 全选页面内容（`Ctrl+A`），复制（`Ctrl+C`）
   - 打开记事本，粘贴，保存为 `search.html`

   **方法三：通过 Ctrl+S 保存（最简单）**
   - 在种子列表页面按 `Ctrl+S`
   - 保存类型选择 **"网页，仅 HTML"**（不要选"网页，全部"）
   - 保存为 `search.html`

### 如何确认保存成功

用记事本打开保存的文件，检查：

- 文件大小应该在 **几十 KB 到几百 KB** 之间
- 内容应该以 `<html` 或 `<!DOCTYPE` 开头
- 能搜索到种子标题文字

## 第三步：保存种子详情页面

这一步需要保存某个 **免费种子** 的详情页面 HTML。

> **为什么需要这个**：维护者需要了解详情页的结构，以解析免费等级（Free、2xFree 等）、免费到期时间、是否有 H&R（Hit and Run）限制等关键信息。

### 操作步骤

1. 在种子列表中，**找到一个带有免费标签的种子**（如显示 "Free"、"2X Free" 等图标/文字）

2. **点击进入该种子的详情页面**

3. **使用与第二步相同的方法**，保存该页面的完整 HTML，命名为 `detail.html`

### 注意事项

- **优先选择有免费标签的种子**，这样保存的 HTML 会包含免费状态的 DOM 结构
- 如果免费种子还显示了 **到期时间**（如 "限时免费，剩余 3 天"），那就更好了
- 如果当前没有免费种子，保存一个普通种子的详情页也可以，但请在说明中注明

## 第四步：保存个人信息页面

这一步需要保存你的 **个人资料页面** 的 HTML。

> **为什么需要这个**：维护者需要根据页面结构解析上传量、下载量、分享率、魔力值、用户等级等信息。

### 操作步骤

1. 点击站点页面中你的 **用户名**（通常在页面右上角），进入个人资料页面
   - 通常网址类似 `userdetails.php?id=xxxxx`

2. **使用与第二步相同的方法**，保存该页面的完整 HTML，命名为 `userinfo.html`

3. 如果站点的首页（`index.php`）也显示了用户信息（如上传量、做种数等），也请额外保存首页 HTML，命名为 `index.html`

### 额外页面（可选但有帮助）

如果站点有以下页面，也建议一并保存：

| 页面            | 通常网址                     | 用途               |
| --------------- | ---------------------------- | ------------------ |
| 魔力值/积分页面 | `mybonus.php`                | 解析每小时积分收入 |
| 做种统计页面    | `getusertorrentlistajax.php` | 解析做种数量和大小 |

## 第五步：提供站点基本信息

请在一个文本文件（命名为 `site-info.txt`）中提供以下信息：

```
站点名称：（例如：HDSky）
站点网址：（例如：https://hdsky.me/）
站点类型：（NexusPHP / mTorrent / Gazelle / Unit3D / 不确定）
认证方式：（Cookie / API Key / Passkey / 不确定）

种子列表页网址：（例如：https://hdsky.me/torrents.php）
种子详情页网址：（例如：https://hdsky.me/details.php?id=12345）
个人信息页网址：（例如：https://hdsky.me/userdetails.php?id=99999）

备注：（任何你觉得有用的信息，比如：
  - 该站点是否有特殊的免费标识
  - 是否有 H&R 制度
  - 是否需要特殊的认证方式
  - 等级规则页面网址
）
```

## 第六步：提交数据

### 方式一：通过社区群组提交（推荐）

加入以下任一交流群，将准备好的文件 **私发给群主**：

| 平台         | 加入方式                                       |
| ------------ | ---------------------------------------------- |
| **Telegram** | [点击加入群组](https://t.me/+7YK2kmWIX0s1Nzdl) |
| **QQ 群**    | 群号：274984594                                |

**发送内容**：

1. `search.html` — 种子列表页面 HTML
2. `detail.html` — 种子详情页面 HTML
3. `userinfo.html` — 个人信息页面 HTML
4. `index.html` — 首页 HTML（如有）
5. `site-info.txt` — 站点基本信息

> 💡 **建议**：将所有文件打包成一个 **zip 压缩包** 发送，方便维护者接收。

### 方式二：通过 GitHub Issue 提交

1. 前往 [GitHub Issues](https://github.com/sunerpy/pt-tools/issues)
2. 点击 **"New issue"**
3. 标题格式：`[新站点请求] 站点名称`
4. 在正文中填写站点基本信息
5. **将 HTML 文件作为附件上传**（拖拽到编辑框即可）

> ⚠️ **注意**：GitHub Issue 是公开的，请务必在提交前完成脱敏处理（见下方隐私提醒）。群组私发则相对安全。

## 隐私与安全提醒

> ⚠️ **非常重要**：在提交 HTML 文件之前，请务必进行脱敏处理！

HTML 文件中可能包含你的个人敏感信息，**提交前务必检查并删除**：

### 必须删除的信息

| 敏感信息             | 在 HTML 中的表现                                      | 如何处理                                       |
| -------------------- | ----------------------------------------------------- | ---------------------------------------------- |
| **Cookie / Session** | 如果通过 "Copy outerHTML" 保存，通常不会包含 Cookie   | 搜索 `cookie`、`PHPSESSID`，如有则删除         |
| **Passkey**          | 通常出现在 RSS 链接中，形如 `passkey=abc123def456...` | 搜索 `passkey`，将值替换为 `REMOVED`           |
| **用户名**           | 页面中显示的你的用户名                                | 可以保留（用于确认解析是否正确），或替换为假名 |
| **邮箱**             | 个人资料页可能显示                                    | 搜索并替换为 `user@example.com`                |
| **IP 地址**          | 部分站点在个人资料页显示最后登录 IP                   | 搜索并替换为 `127.0.0.1`                       |
| **邀请链接**         | 部分站点可能显示你的邀请链接                          | 搜索 `invite` 并删除相关内容                   |

### 快速脱敏方法

1. 用记事本打开 HTML 文件
2. 使用 `Ctrl+H`（查找和替换）
3. 依次搜索并替换上表中的敏感信息
4. 保存文件

> **如果你不确定某些信息是否敏感**，可以在群里先问维护者。宁可多删一些，也不要泄露个人信息。

## 常见问题

### Q：我不知道站点是什么架构怎么办？

不用担心，直接提供 HTML 文件即可，维护者会判断。

### Q：站点目前没有免费种子怎么办？

可以先保存普通种子的页面。等有免费种子时，再补充一份包含免费种子的页面即可。

### Q：我可以只提供截图吗？

**不可以**。截图无法用于解析 HTML 结构。必须提供 HTML 源代码文件。截图可以作为补充说明（比如标注哪个图标是免费标识），但不能替代 HTML 文件。

### Q：站点使用 API 而不是网页怎么办？

部分站点（如 M-Team）使用 API 接口，此时你需要：

1. 打开浏览器开发者工具（`F12`）
2. 切换到 **"Network"（网络）** 标签页
3. 在站点上进行搜索操作
4. 在 Network 面板中找到 API 请求（通常是 `api/` 开头的请求）
5. 右键点击该请求 → **"Copy" → "Copy response"**（复制响应内容）
6. 将响应内容保存为 `search-api.json`

同样地，保存用户信息 API 的响应为 `userinfo-api.json`。

### Q：提交后多久会适配？

视维护者时间而定，通常：

- 标准 NexusPHP 站点：1-3 天
- 需要自定义驱动的站点：3-7 天
- 如果数据不完整需要补充：取决于你的响应速度

### Q：我有编程经验，想自己适配可以吗？

当然可以！请参考 [开发指南 - 添加新站点支持](development.md#添加新站点支持) 了解完整的开发流程。

---

感谢你帮助扩展 pt-tools 的站点支持！每一个新站点的适配都是对社区的贡献。

[返回首页](../../README.md)
